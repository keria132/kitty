function ready(){console.log("Hello there!"),getCatCategories(),getCatBreeds()}document.addEventListener("DOMContentLoaded",ready);const user=window.prompt("Enter your nickname","");let limit=8,page;992<=window.screen.width&&(limit=9),1200<=window.screen.width&&(limit=12);const apiKey="live_jFCZR4OFaVdwt4fuRNyt5VG4uH3HUAebrvZUPwIDwlpuSH2i3E9Kcd007mdx8DsH",root=document.getElementById("root"),main=document.querySelector(".main"),menu=document.querySelector(".menu"),mobileMenu=document.querySelector(".menu-mobile"),categoriesHeader=document.querySelectorAll(".sort-menu__header")[0],categoriesButton=document.querySelectorAll(".sort-menu__button")[0],categoriesList=document.querySelectorAll(".sort-menu__list")[0],unsetCategory=document.querySelector(".categories-list__unset"),breedsHeader=document.querySelectorAll(".sort-menu__header")[1],breedsButton=document.querySelectorAll(".sort-menu__button")[1],breedsList=document.querySelectorAll(".sort-menu__list")[1],unsetBreed=document.querySelector(".breeds-list__unset"),votesButton=document.querySelector(".votes"),resetVotes=document.querySelector(".resetVotes"),favoritesButton=document.querySelector(".favorites"),resetFavourites=document.querySelector(".resetFavourites"),searchAll=document.querySelector(".searchAll"),search=document.querySelector(".search__button");function categoriesMenuToggle(){categoriesHeader.classList.toggle("sort-menu__header_open"),categoriesList.classList.toggle("sort-menu__list_open"),categoriesButton.classList.toggle("sort-menu__button_open")}function breedsMenuToggle(){breedsHeader.classList.toggle("sort-menu__header_open"),breedsList.classList.toggle("sort-menu__list_open"),breedsButton.classList.toggle("sort-menu__button_open")}function searchRequest(e,t){console.log("Start request");let s=new XMLHttpRequest;s.open(e,t,!0),s.setRequestHeader("x-api-key",apiKey),s.onload=function(){var e=JSON.parse(this.response);200<=s.status&&s.status<400&&displayCats(e)},s.send()}function displayCats(e){let d=[];console.log(e),e.forEach(e=>{e.hasOwnProperty("image")&&(e.url=e.image.url),e.hasOwnProperty("image_id")||(e.image_id=e.id);const t=document.createElement("div"),s=(t.classList.add("card"),document.createElement("img")),i=(s.src=e.url,document.createElement("div"));if(i.classList.add("card-info"),e.breeds&&0<e.breeds.length){const r=document.createElement("div");r.classList.add("card__info"),r.setAttribute("title","Breed"),r.textContent=e.breeds[0].name,i.appendChild(r)}if(e.categories){const l=document.createElement("div");l.classList.add("card__info"),l.setAttribute("title","Category"),l.textContent=e.categories[0].name.charAt(0).toUpperCase()+e.categories[0].name.slice(1),i.appendChild(l)}const a=document.createElement("div"),c=(a.innerHTML='<svg class="card__heart" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 502 502" style="enable-background:new 0 0 502 502;" xml:space="preserve" width="512" height="512"><g><g><path d="M370.994,49.998c-61.509,0-112.296,45.894-119.994,105.306    c-7.698-59.412-58.485-105.306-119.994-105.306C64.176,49.998,10,104.174,10,171.004s80.283,135.528,116.45,166.574    C160.239,366.582,251,452.002,251,452.002s90.761-85.42,124.55-114.424C411.717,306.532,492,237.834,492,171.004    S437.824,49.998,370.994,49.998z"/><path style="fill: black;" d="M251,462.002c-2.464,0-4.928-0.906-6.854-2.718c-0.906-0.853-90.981-85.595-124.21-114.119l-0.348-0.299    C80.771,311.548,0,242.216,0,171.004C0,98.767,58.769,39.998,131.006,39.998c52.959,0,99.547,31.914,119.994,78.382    c20.446-46.468,67.035-78.382,119.994-78.382C443.231,39.998,502,98.767,502,171.004c0,71.211-80.771,140.543-119.588,173.862    l-0.348,0.299c-33.231,28.525-123.304,113.266-124.21,114.119C255.928,461.096,253.464,462.002,251,462.002z M131.006,59.998    C69.797,59.998,20,109.795,20,171.004c0,62.021,78.917,129.761,112.615,158.687l0.348,0.299    c28.14,24.155,96.205,87.815,118.037,108.294c21.832-20.479,89.897-84.139,118.037-108.294l0.348-0.299    C403.083,300.765,482,233.025,482,171.004c0-61.209-49.797-111.006-111.006-111.006c-55.619,0-102.941,41.525-110.077,96.591    c-0.646,4.984-4.891,8.715-9.917,8.715s-9.271-3.73-9.917-8.715C233.948,101.523,186.625,59.998,131.006,59.998z"/></g></g></svg>',a.setAttribute("imageId",e.image_id),a.addEventListener("click",handleFavorite),document.createElement("div")),n=(c.innerHTML='<svg class="card__vote card__vote-up" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 485.027 485.027" xml:space="preserve"><g><g><path id="XMLID_1929_" style="fill:#3C92CA;" d="M109.4,459.991H13c-2.1,0-3.9-1.8-3.9-3.9v-248.4c0-2.1,1.8-3.9,3.9-3.9h96.4                                c2.1,0,3.9,1.8,3.9,3.9v248.4C113.3,458.191,111.6,459.991,109.4,459.991z"/>                            <path d="M284.6,20.391c-28.2-20.7-67.2-8.8-68.8-8.3c-3.8,1.2-6.3,4.7-6.3,8.6v85.8c0,29.1-13.8,53.7-41.1,73.2                                c-21.1,15.1-42.7,21.3-42.9,21.4c-0.2,0-0.3,0.1-0.5,0.2l-5.1,1.7c-3-4.9-8.3-8.2-14.5-8.2H16.9c-9.3,0-16.9,7.6-16.9,16.9v240.5                                c0,9.3,7.6,16.9,16.9,16.9h88.6c8,0,14.7-5.6,16.4-13c11.9,12.7,28.8,20.7,47.6,20.7h209.8c44.6,0,73.1-23.3,78.1-64l26.8-170.2                                c3.9-24.7-6.2-49.7-25.8-63.7c-11.1-8-24.2-12.2-37.9-12.2H311.4v-79.6C311.4,55.891,302.4,33.491,284.6,20.391z M104.2,450.891                                H18.1v-238h86.1V450.891z M420.5,184.791c9.9,0,19.3,3,27.3,8.8c14,10.1,21.3,28.2,18.4,46.2l-26.7,170.3c0,0.1,0,0.2,0,0.3                                c-4.9,39.8-35.4,48.2-60.2,48.2H169.5c-26,0-47.1-21.1-47.1-47.1v-190.2l8.3-2.8c2.9-0.8,25.2-7.6,47.8-23.7 c32.1-22.8,49.1-53.3,49.1-88.2v-78.6c10.4-2,31.3-4,46.4,7.1c12.8,9.4,19.3,26.9,19.3,52v88.7c0,5,4.1,9.1,9.1,9.1h118.1V184.791 z"/></g></g></svg>',c.classList.add("upVote"),c.setAttribute("imageId",e.image_id),c.setAttribute("value",1),c.addEventListener("click",handleVote),document.createElement("div")),o=(n.innerHTML='<svg class="card__vote card__vote-down" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 485.027 485.027" xml:space="preserve"><g><g><path id="XMLID_1929_" style="fill: red;" d="M109.4,459.991H13c-2.1,0-3.9-1.8-3.9-3.9v-248.4c0-2.1,1.8-3.9,3.9-3.9h96.4                                c2.1,0,3.9,1.8,3.9,3.9v248.4C113.3,458.191,111.6,459.991,109.4,459.991z"/>                            <path d="M284.6,20.391c-28.2-20.7-67.2-8.8-68.8-8.3c-3.8,1.2-6.3,4.7-6.3,8.6v85.8c0,29.1-13.8,53.7-41.1,73.2                                c-21.1,15.1-42.7,21.3-42.9,21.4c-0.2,0-0.3,0.1-0.5,0.2l-5.1,1.7c-3-4.9-8.3-8.2-14.5-8.2H16.9c-9.3,0-16.9,7.6-16.9,16.9v240.5                                c0,9.3,7.6,16.9,16.9,16.9h88.6c8,0,14.7-5.6,16.4-13c11.9,12.7,28.8,20.7,47.6,20.7h209.8c44.6,0,73.1-23.3,78.1-64l26.8-170.2                                c3.9-24.7-6.2-49.7-25.8-63.7c-11.1-8-24.2-12.2-37.9-12.2H311.4v-79.6C311.4,55.891,302.4,33.491,284.6,20.391z M104.2,450.891                                H18.1v-238h86.1V450.891z M420.5,184.791c9.9,0,19.3,3,27.3,8.8c14,10.1,21.3,28.2,18.4,46.2l-26.7,170.3c0,0.1,0,0.2,0,0.3                                c-4.9,39.8-35.4,48.2-60.2,48.2H169.5c-26,0-47.1-21.1-47.1-47.1v-190.2l8.3-2.8c2.9-0.8,25.2-7.6,47.8-23.7 c32.1-22.8,49.1-53.3,49.1-88.2v-78.6c10.4-2,31.3-4,46.4,7.1c12.8,9.4,19.3,26.9,19.3,52v88.7c0,5,4.1,9.1,9.1,9.1h118.1V184.791 z"/></g></g></svg>',n.classList.add("downVote"),n.setAttribute("imageId",e.image_id),n.setAttribute("value",0),n.addEventListener("click",handleVote),document.createElement("div"));o.classList.add("card__bottom"),o.appendChild(a),o.appendChild(c),o.appendChild(n),t.appendChild(s),t.appendChild(i),t.appendChild(o),d.push(t)});const t=document.createElement("div"),s=(t.classList.add("search"),document.createElement("button"));s.classList.add("search__button"),s.textContent="Next cats",s.addEventListener("click",nextCall),t.appendChild(s),d.push(t),main.replaceChildren(...d)}function getCatCategories(){const s=document.querySelector(".categories-list");let e=new XMLHttpRequest;e.open("GET","https://api.thecatapi.com/v1/categories",!0),e.setRequestHeader("x-api-key",apiKey),e.onload=function(){let e=JSON.parse(this.response);e.forEach(t=>{const e=document.createElement("li");e.textContent=t.name.charAt(0).toUpperCase()+t.name.slice(1),e.setAttribute("categoryId",t.id),e.addEventListener("click",function(){let e=this.getAttribute("categoryId");categoriesHeader.textContent=t.name.charAt(0).toUpperCase()+t.name.slice(1),breedsHeader.textContent="Breed",searchRequest("GET","https://api.thecatapi.com/v1/images/search?category_ids="+e+"&limit="+limit),nextCall=function(){searchRequest("GET","https://api.thecatapi.com/v1/images/search?category_ids="+e+"&limit="+limit)}}),s.appendChild(e)})},e.send()}function getCatBreeds(){const s=document.querySelector(".breeds-list");let e=new XMLHttpRequest;e.open("GET","https://api.thecatapi.com/v1/breeds",!0),e.setRequestHeader("x-api-key",apiKey),e.onload=function(){let e=JSON.parse(this.response);e.forEach(t=>{const e=document.createElement("li");e.textContent=t.name,e.setAttribute("breedId",t.id),e.addEventListener("click",function(){let e=this.getAttribute("breedId");breedsHeader.textContent=t.name,categoriesHeader.textContent="Category",searchRequest("GET","https://api.thecatapi.com/v1/images/search?breed_ids="+e+"&limit="+limit),nextCall=function(){searchRequest("GET","https://api.thecatapi.com/v1/images/search?breed_ids="+e+"&limit="+limit)}}),s.appendChild(e)})},e.send()}function handleVote(){var e=this.getAttribute("imageId"),t=this.getAttribute("value"),e={image_id:e,sub_id:user,value:t};console.log(e);let s=new XMLHttpRequest;s.onload=()=>{var e=JSON.parse(s.responseText);console.log(e)},s.open("POST","https://api.thecatapi.com/v1/votes"),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("x-api-key",apiKey),s.send(JSON.stringify(e))}function handleFavorite(){var e={image_id:this.getAttribute("imageId"),sub_id:user};console.log(e);let t=new XMLHttpRequest;t.onload=()=>{var e=JSON.parse(t.responseText);console.log(e)},t.open("POST","https://api.thecatapi.com/v1/favourites"),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("x-api-key",apiKey),t.send(JSON.stringify(e))}function nextCall(){searchRequest("GET","https://api.thecatapi.com/v1/images/search?limit="+limit)}searchAll.addEventListener("click",()=>{searchRequest("GET","https://api.thecatapi.com/v1/images/search?limit="+limit),nextCall=function(){searchRequest("GET","https://api.thecatapi.com/v1/images/search?limit="+limit)}}),search.addEventListener("click",()=>{searchRequest("GET","https://api.thecatapi.com/v1/images/search?limit="+limit)}),menu.addEventListener("click",()=>{menu.classList.toggle("menu_open"),mobileMenu.classList.toggle("menu-mobile_open")}),categoriesButton.addEventListener("click",categoriesMenuToggle),breedsButton.addEventListener("click",breedsMenuToggle),unsetCategory.addEventListener("click",function(){categoriesHeader.textContent="Category",searchRequest("GET","https://api.thecatapi.com/v1/images/search?limit="+limit),nextCall=function(){searchRequest("GET","https://api.thecatapi.com/v1/images/search?limit="+limit)}}),unsetBreed.addEventListener("click",function(){breedsHeader.textContent="Breed",searchRequest("GET","https://api.thecatapi.com/v1/images/search?limit="+limit),nextCall=function(){searchRequest("GET","https://api.thecatapi.com/v1/images/search?limit="+limit)}}),votesButton.addEventListener("click",function(){searchRequest("GET","https://api.thecatapi.com/v1/votes?sub_id="+user+"&limit="+limit),nextCall=function(){searchRequest("GET","https://api.thecatapi.com/v1/votes?sub_id="+user+"&limit="+limit)}}),resetVotes.addEventListener("click",function(){let t=new XMLHttpRequest;t.open("GET","https://api.thecatapi.com/v1/votes?sub_id="+user),t.setRequestHeader("x-api-key",apiKey),t.onload=function(){let e=JSON.parse(this.response);200<=t.status&&t.status<400&&e.forEach(e=>{console.log(e.id);let t=new XMLHttpRequest;t.onload=()=>{console.log(t.responseText)},t.open("DELETE","https://api.thecatapi.com/v1/votes/"+e.id),t.setRequestHeader("x-api-key",apiKey),t.send()})},t.send()}),favoritesButton.addEventListener("click",function(){searchRequest("GET","https://api.thecatapi.com/v1/favourites?sub_id="+user),nextCall=function(){searchRequest("GET","https://api.thecatapi.com/v1/favourites?sub_id="+user)}}),resetFavourites.addEventListener("click",function(){let t=new XMLHttpRequest;t.open("GET","https://api.thecatapi.com/v1/favourites?sub_id="+user),t.setRequestHeader("x-api-key",apiKey),t.onload=function(){let e=JSON.parse(this.response);200<=t.status&&t.status<400&&e.forEach(e=>{console.log(e.id);let t=new XMLHttpRequest;t.onload=()=>{console.log(t.responseText)},t.open("DELETE","https://api.thecatapi.com/v1/favourites/"+e.id),t.setRequestHeader("x-api-key",apiKey),t.send()})},t.send()});
//# sourceMappingURL=script.min.js.map
